# B站主页净化助手

## 🎯 项目简介

**B站主页净化助手**是一款基于Python开发的自动化工具，旨在帮助用户通过批量拉黑特定分区的主播，减少低质量或不符合个人偏好的直播内容出现在B站首页和视频详情页的推荐位置，从而优化个人浏览体验。

## ✨ 核心特性

- **智能分区扫描**：精准定位娱乐直播区的热门子分区
- **多层过滤系统**：支持白名单保护和性别过滤规则
- **自动化批量操作**：一键完成拉黑任务，节省手动操作时间
- **智能认证机制**：自动处理B站API的复杂签名验证

## 🚀 快速开始

### 环境要求
- Python 3.6 或更高版本
- 已登录的B站账号

### 安装步骤
1. 克隆或下载本仓库
2. 安装必要的依赖：
   ```bash
   pip install requests
   ```

### 配置说明
1. 打开脚本文件，找到配置部分
2. 设置目标分区（详见下方分区配置）
3. 添加您的B站cookies（详见下方cookies获取指南）
4. 配置白名单和过滤规则（可选）

### 运行工具
```bash
python bilibili_auto_blacklist.py
```

## ⚙️ 详细配置指南

### 分区配置
工具支持清理以下常见娱乐直播分区：

| 分区名称 | 分区ID | 父分区ID | 说明 |
|---------|--------|----------|------|
| 萌宅领域 | 530 | 1 | 默认配置分区 |
| 舞见分区 | 207 | 1 | 舞蹈相关内容 |
| 颜值分区 | 145 | 1 | 颜值、聊天等内容 |
| 团播分区 | 1013 | 1 | 多人直播、团体活动 |

修改代码中的`target_url`即可切换分区：
```python
# 清理颜值分区
target_url = 'https://live.bilibili.com/p/eden/area-tags?areaId=145&parentAreaId=1'

# 清理团播分区  
target_url = 'https://live.bilibili.com/p/eden/area-tags?areaId=1013&parentAreaId=1'
```

### 🍪 Cookies获取指南

#### 操作步骤
1. **打开B站并登录**
   - 访问 [bilibili.com](https://www.bilibili.com)
   - 确保已登录您的B站账号

2. **打开开发者工具**
   - **Windows/Linux**：按 `F12` 键
   - **Mac**：按 `Command + Option + I` 键
   - 或者：右键点击页面空白处，选择"检查"

3. **切换到网络面板**
   - 选择"网络"（Network）选项卡
   - 确保"记录网络活动"按钮已开启

4. **筛选请求**
   - 在筛选器输入框中输入：`www.bilibili.com`
   - 按回车键，只显示对B站主域的请求

5. **复制cURL命令**
   - 在筛选出的请求列表中，**任意选择一个请求**
   - 在该请求上**右键点击**
   - 选择"复制" → "复制为cURL (bash)"

6. **使用在线转换工具**
   - 打开转换网站：[https://www.lddgo.net/convert/curl-to-code](https://www.lddgo.net/convert/curl-to-code)
   - 在左侧"curl 命令"输入框中**粘贴**刚才复制的内容

7. **转换为Python格式**
   - 在网站右侧的编程语言下拉菜单中，选择"**Python**"
   - 点击"**转换**"按钮

8. **提取cookies**
   - 在右侧"输出结果"框中，找到 `cookies={...}` 格式的内容
   - **复制**整个 `cookies={...}` 部分

#### 配置到工具中
```python
# 这里粘贴你的B站cookies
cookies = {
    'SESSDATA': 'xxx',
    'bili_jct': 'xxx',
    'DedeUserID': 'xxx',
    # ... 其他cookies项
}
```

### 白名单配置
白名单系统确保您喜欢的主播不会被误伤：
```python
white_list = [
    '主播名称1',
    '主播名称2',
    # 可添加更多您喜欢的主播
]
```

### 性别过滤配置
支持基于性别的过滤规则，根据个人偏好调整：
```python
# 示例配置
skip_sex = []  # 不启用性别过滤
# skip_sex = ['男']  # 跳过男性主播
# skip_sex = ['女']  # 跳过女性主播
# skip_sex = ['保密']  # 跳过未公开性别的主播
```

## 📊 运行流程

1. **初始化认证**：获取API所需的wbi密钥和webid
2. **分区扫描**：遍历指定分区的所有直播间
3. **条件过滤**：依次检查白名单和性别过滤规则
4. **批量操作**：对符合条件的账号执行拉黑
5. **生成报告**：显示详细的处理统计

## ⚠️ 重要安全提示

### 🔒 Cookies安全须知
1. **绝对保密**：Cookies相当于您的账号密码，请勿泄露给任何人
2. **本地使用**：仅在您自己的电脑上使用，不要上传到云端或分享给他人
3. **定期更新**：Cookies会过期，如果工具失效可能需要重新获取
4. **专用账号**：建议使用小号或备用账号进行操作

### ⚡ 使用注意事项
- **遵守平台规则**：使用前请仔细阅读B站用户协议
- **合理使用**：请勿滥用工具进行恶意批量操作
- **效果说明**：拉黑仅影响您个人的账号推荐，不会影响他人
- **可逆操作**：所有拉黑操作都可以在B站设置中撤销

## ❓ 常见问题

### Q1：为什么需要cookies？
A：cookies是B站识别用户身份的唯一凭证，工具需要用它来模拟您的账号执行拉黑操作。

### Q2：cookies会过期吗？
A：会的。部分cookies（如SESSDATA）有有效期，通常为30天左右。过期后需要重新获取。

### Q3：获取cookies会封号吗？
A：正常获取不会。但请遵守B站用户协议，不要滥用工具进行恶意操作。

### Q4：可以共享cookies吗？
A：**绝对不要共享cookies！** Cookies包含了您的账号登录凭证，他人获取后可以完全控制您的账号。请像保护密码一样保护您的cookies。

### Q5：如何验证cookies是否有效？
```python
import requests

# 使用你配置的cookies
test_response = requests.get('https://api.bilibili.com/x/web-interface/nav', 
                           cookies=cookies)
if test_response.json().get('code') == 0:
    print("✅ Cookies有效")
else:
    print("❌ Cookies无效，请重新获取")
```

## 🔧 故障排除

### 常见问题
1. **认证失败**：检查cookies是否有效且未过期
2. **网络错误**：确认网络连接正常，能够访问B站
3. **分区无效**：确认areaId参数是否正确

### 调试建议
1. 先尝试访问目标分区页面，确认能够正常显示
2. 使用少量白名单测试，验证基本功能
3. 查看控制台输出，定位具体错误

## 📈 预期效果

使用本工具后，您可以期待：
- ✅ 主页推荐的直播内容更符合个人偏好
- ✅ 视频详情页的相关推荐更加精准
- ✅ 整体浏览体验得到个性化优化
- ✅ 个人账号的内容生态系统更加健康

## 🔄 维护与更新

### 定期维护建议
1. 每1-2个月更新一次白名单
2. 根据个人兴趣变化调整目标分区
3. 关注B站API更新，及时调整代码

### 代码结构说明
```
bilibili_auto_blacklist.py
├── 配置部分（分区、cookies、白名单等）
├── 认证函数（获取wbi密钥、webid等）
├── 工具函数（生成签名、获取性别等）
├── 核心逻辑（主循环、过滤、拉黑操作）
└── 统计输出（运行结果报告）
```

## 🤝 贡献指南

欢迎为项目做出贡献：
1. Fork本仓库
2. 创建功能分支
3. 提交代码更改
4. 发起Pull Request

## 📄 开源协议

本项目采用GPL 3.0开源协议，详情请查看项目根目录下的LICENSE文件。

## 🌟 使用建议

1. **初次使用**：建议先配置完整的白名单，再逐步调整
2. **分区选择**：根据个人情况选择最需要清理的分区
3. **定期运行**：建议每月运行1-2次以保持效果
4. **效果评估**：运行后观察首页推荐变化，调整配置

---

**技术让内容管理更加高效，请合理使用工具，共建良好的网络环境。**

*注：本工具仅为技术实现方案，使用前请确保符合B站平台规则。*
